---
import { Picture } from "@astrojs/image/components";
import Icon from "astro-icon";

const links = new Map([
  ["/#about", "Ã€ propos"],
  ["/#formation", "Formation"],
  ["/#projects", "Projets"],
  ["/#contact", "Contact"],
]);

const socials = [
  {
    name: "GitHub",
    href: "https://github.com/bflorestal/",
    icon: "mdi:github"
  },
  {
    name: "LinkedIn",
    href: "https://linkedin.com/in/bryan-florestal/",
    icon: "mdi:linkedin"
  }
]
---

<header class="fixed py-2 px-6 flex items-center justify-between bg-bgcolor bg-opacity-80 backdrop-blur-md z-10 w-full h-[var(--header-height)] transition-all">
  {/* Logo */}
  <a href="/#" aria-label="Accueil" class="flex justify-center items-center">
    <Picture
      src="/img/logo.jpeg"
      alt="Logo"
      widths={[50]}
      sizes="50px"
      formats={["avif", "webp", "png"]}
      aspectRatio={1}
    />
  </a>
  {/* Liens */}
  <nav class="md:flex justify-center items-center hidden">
    <ul class="flex gap-x-4">
      {Array.from(links, ([href, label]) => (
        <li class="">
          <a href={href} class="px-2 text-neutral-300 font-medium hover:opacity-80 transition-shadow duration-300">
            {label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
  {/* GitHub et LinkedIn */}
  <div class="flex justify-center items-center gap-x-3">
    {socials.map(socialMedia => (
      <a aria-label={`Mon profil ${socialMedia.name}`} href={socialMedia.href} target="_blank">
        <Icon name={socialMedia.icon} class="w-8 h-8 hover:opacity-80 transition-opacity" />
      </a>
    ))}
  </div>
</header>

<script>
  const header = document.querySelector("header");
  const height = { lg: 110, std: 66 } as const;

  window.addEventListener("scroll", () => {
    if (!header) return;

    if (window.scrollY > 0) {
      header.classList.add("shadow-md");
      header.style.setProperty("--header-height", `${height.std}px`);
    } else {
      header.classList.remove("shadow-md");
      header.style.setProperty("--header-height", `${height.lg}px`);
    }
  });
</script>

<style>
  header {
    --header-height: 110px; 
  }
</style>